# Описание предметной области

Предметной областью разработки является деятельность современного многозального кинотеатра. Основная цель кинотеатра — организация показа фильмов для зрителей и получение дохода от продажи билетов. Для каждого киносеанса в базе данных хранится информация о кинозале, кинофильме, комплекте билетов на определенное количество мест (цена на которые рассчитана с помощью коэффициента), а так же о дате и времени проведения.

Кассир принимает заказы на покупку билетов от клиентов. Покупка билетов может произойти, если существует 1 и более сеанс на дату, включающую день продажи билета и последующие за ней. 

В рамках одного заказа клиент может приобрести неограниченное количество билетов (при условии наличия мест в кинозале) на разные киносеансы, включая сеансы в разные дни и в разное время. После завершения операции продажи эти билеты автоматически помечаются в системе как проданные, а сформированный заказ с детализацией фиксируется в базе данных. Для оценки эффективности работы кинотеатра система обеспечивает возможность формирования и сохранения в базе данных ежемесячных отчетов, включающих детальный анализ выручки и статистику по проведенным сеансам, при необходимости имеется возможность их просмотра.  Кроме того, для оперативного мониторинга текущего состояния системы в любой момент времени предоставляется возможность получить аналитические сведения через выполнение параметризованных запросов: вывести список сеансов, на которые не было продано ни одного билета; определить лучший фильм года по кассовому сбору; получить полные технические сведения конкретного кинозала.

![tenor](https://github.com/user-attachments/assets/8ed1261b-3d12-4cc8-a7b4-ff0566a99399)

# Определение конечных пользователей:

•	Администратор

•	Менеджер

•	Управляющий (директор)

•	Кассир 

<img width="392" height="299" alt="image" src="https://github.com/user-attachments/assets/34fd6cbf-0d5f-4b34-b6d0-f606b1d84b33" />

# Основные компоненты архитектуры

Каждый функциональный блок реализован в виде отдельного blueprint, что обеспечивает модульность и независимость компонентов.

• Модуль запросов данных (query): выполняет параметризованные запросы.

• Модуль аутентификации (auth): реализует вход внутренних пользователей.

• Модуль отчетов (report): формирует и отображает ежемесячные отчеты.

• Модуль записи пациента на приём (ticket) обеспечивает выбор и добавление в корзину билетов на киносеанс с последующей возможностью оформления покупки.

# Логическая схема базы данных

<img width="525" height="480" alt="image" src="https://github.com/user-attachments/assets/dcb5e012-cb6d-4dd9-b985-1a1c41c090b1" />

# Системная архитектура приложения

Основу системы составляет серверная часть на базе фреймворка Flask (Python), взаимодействующая с реляционной базой данных MySQL.

## Компоненты архитектуры

## Веб-сервер (Flask)


• Отвечает за прием и обработку НТТР-запросов от клиентов.

• Реализует маршрутизацию между различными функциональными модулями (blueprints).

• Обеспечивает взаимодействие с базой данных через соответствующие модули.

## База данных (MySQL)

• Хранит все структурированные данные приложения: сведения о пользователях, сеансах, отчетах.

• Операции взаимодействия с БД реализованы с помощью SQL-запросов, включая хранимые процедуры для создания отчетов

## WSGI-cepвep (werkzeug)

• Обеспечивает взаимодействие между веб-сервером и Python-приложением

• Принимает НТТР-запросы от веб-сервера, передает их Python-приложению, получает от него ответы и возвращает их обратно веб-серверу для отправки клиенту

<img width="231" height="271" alt="image" src="https://github.com/user-attachments/assets/4d42ab36-9c02-4931-9c12-5e1a9a4ae352" />
 
Системная архитектура приложения


# Варианты использования ИС

_Карточка Авторизация_
1)	Предусловие (требование для начала работы сценария)
   
•	Система запущена и готова к работе по определенному адресу

•	База данных подключена и настроена

•	В системе есть шаблоны для работы с ней

•	До этого пользователь не был авторизован

3)	Минимальные гарантии
   
•	Состояние Баз данных неизменное

•	Данные в Базе данных неизменные

Основной успешный сценарий:

1)	Пользователь начинает сценарий после выполнения предусловия.
   
3)	Система выдает меню Авторизации с предложениями ввести логин и пароль.
   
5)	При нажатии на кнопки «Отправить» и при совпадении логина и пароля с базой данных перейдет на страницу Главное меню с указанием имени пользователя и его «роли» в системе.
   
Исключения:
При неправильно введенном или несуществующем логине или пароле пользователь проинформируется об этом.

<img width="544" height="227" alt="image" src="https://github.com/user-attachments/assets/5c06dbf0-0548-47a6-8ca0-7d73e7b1ce0c" />

MCV диаграмма процесса авторизации

_Карточка Главного меню_

1)	Предусловие (требование для начала работы сценария)
   
•	Система запущена и готова к работе по определенному адресу

•	База данных подключена и настроена

•	В системе есть шаблоны для работы с ней

•	Пользователь авторизован и имеет доступ к системе

3)	Минимальные гарантии
   
•	Состояние Баз данных неизменное

•	Данные в Базе данных неизменные

•	Имеется возможность выхода из системы

•	Имеется возможность перейти к работе с запросом

Основной успешный сценарий:

1)	Пользователь начинает сценарий после выполнения предусловия.
   
3)	Система выдает Главное меню с вариантами взаимодействия с ней.
   
5)	При нажатии на кнопки «Работа с запросами» перейдет на страницу работы с запросами
   
Исключения:

При нажатии на кнопки «Выход из системы» пользователь закончит работу с системой и проинформируется об этом.

<img width="272" height="167" alt="image" src="https://github.com/user-attachments/assets/a8a2ad3a-77fb-42d1-b592-89251e4e5131" />

MCV диаграмма главного меню

## Работа с параметризованными запросами:
_Карточка варианта использования «Работа с параметризованными запросами»_

1)	Предусловие (требование для начала работы сценария)
   
•	Система запущена и готова к работе по определенному адресу

•	База данных подключена и настроена

•	В системе есть шаблоны для работы с ней

•	Пользователь авторизован и имеет доступ к системе

•	Пользователь перешел из Главного меню к работе с запросами

3)	Минимальные гарантии
   
•	Состояние Баз данных неизменное

•	Данные в Базе данных неизменные

•	Имеется возможность выхода из системы

•	Имеется возможность перейти к работе с запросом

Основной успешный сценарий:

1)	Пользователь начинает сценарий после выполнения предусловия.
   
3)	Система выдает меню с вариантами взаимодействия с ним.
   
5)	При нажатии кнопок «Лучший фильм года», «Сеансы без билетов», «Сведения о зале» перейдет на страницу работы с запросами
   
Исключения:

При нажатии на кнопки «Выход из системы» пользователь закончит работу с системой и проинформируется об этом.

При нажатии на кнопки «Назад в главное меню» пользователь вернется в главное меню.

_Карточка варианта использования «Лучший фильм года»_

1)	Предусловие (требование для начала работы сценария)
   
•	Пользователь перешел по кнопке «Лучший фильм года» из меню работы с запросами

•	База данных подключена и настроена

•	В системе есть шаблоны для работы с ней

•	Пользователь авторизован и имеет доступ к системе

3)	Минимальные гарантии
   
•	Состояние Баз данных неизменное

•	Данные в Базе данных неизменные

•	Имеется возможность выхода из системы

•	Имеется возможность работы с запросом

Основной успешный сценарий:

1)	Пользователь начинает сценарий после выполнения предусловия.
   
2)	Система выдает меню с вариантами взаимодействия с ней.
   
3)	При нажатии на поле ввода года – сможет ввести год.
   
4)	Переход к просмотру результата

5)	Предложение ввода нового запроса
    
Расширение сценария: 

1)	При вводе некорректных данных пользователь будет проинформирован об ошибке и получит предложение вернутся к вводу запроса.
   
Исключения:

При нажатии на кнопки «Выход из системы» пользователь закончит работу с системой и проинформируется об этом.

При нажатии на кнопки «Назад в главное меню» пользователь вернется в главное меню.

_Карточка варианта использования «Показать сеансы без билетов»_

1)	Предусловие (требование для начала работы сценария)
   
•	Пользователь перешел по кнопке «Показать сеансы без билетов» из меню работы с запросами

•	База данных подключена и настроена

•	В системе есть шаблоны для работы с ней

•	Пользователь авторизован и имеет доступ к системе

3)	Минимальные гарантии
   
•	Состояние Баз данных неизменное

•	Данные в Базе данных неизменные

•	Имеется возможность выхода из системы

•	Имеется возможность работы с запросом

Основной успешный сценарий:

1)	Пользователь начинает сценарий после выполнения предусловия.
   
3)	Система выдает меню с вариантами взаимодействия с ней.
   
5)	При нажатии на поле ввода года – сможет ввести год.
   
7)	Переход к просмотру результата
   
9)	Предложение ввода нового запроса
    
Расширение сценария: 

1)	При вводе некорректных данных пользователь будет проинформирован об ошибке и получит предложение вернутся к вводу запроса.
    
Исключения:

При нажатии на кнопки «Выход из системы» пользователь закончит работу с системой и проинформируется об этом.

При нажатии на кнопки «Назад в главное меню» пользователь вернется в главное меню.

_Карточка варианта использования «Показать сведения о зале»_

1)	Предусловие (требование для начала работы сценария)

•	Пользователь перешел по кнопке «Показать сведения о зале» из меню работы с запросами

•	База данных подключена и настроена

•	В системе есть шаблоны для работы с ней

•	Пользователь авторизован и имеет доступ к системе

3)	Минимальные гарантии
   
•	Состояние Баз данных неизменное

•	Данные в Базе данных неизменные

•	Имеется возможность выхода из системы

•	Имеется возможность работы с запросом

Основной успешный сценарий:

1)	Пользователь начинает сценарий после выполнения предусловия.
   
2)	Система выдает меню с вариантами взаимодействия с ней.
   
5)	При нажатии на поле ввода айди зала – сможет ввести айди зала.
   
6)	Переход к просмотру результата
   
7)	Предложение ввода нового запроса
   
Расширение сценария: 

1)	При вводе некорректных данных пользователь будет проинформирован об ошибке и получит предложение вернутся к вводу запроса.
   
Исключения:

При нажатии на кнопки «Выход из системы» пользователь закончит работу с системой и проинформируется об этом.

При нажатии на кнопки «Назад в главное меню» пользователь вернется в главное меню.

<img width="412" height="254" alt="image" src="https://github.com/user-attachments/assets/84cc26ea-1249-4bd1-b855-79c899c832a0" />

MCV диаграмма работы с запросами

<img width="348" height="125" alt="image" src="https://github.com/user-attachments/assets/075dad8f-62b3-4e29-a9b0-6a9408b8f567" />

MCV диаграмма процесса проверки прав доступа

## Вариант использования: «Работа с отчетами»

_Карточка варианта использования "Система отчетов"_

1)	Предусловие (требование для начала работы сценария)

•	Система запущена и готова к работе по определенному адресу

•	База данных подключена и настроена

•	В системе есть шаблоны для работы с ней

•	Пользователь авторизован и имеет доступ к системе

2)	Минимальные гарантии

•	Состояние Баз данных неизменное

•	Данные в Базе данных неизменные

•	Имеется возможность выхода из системы

•	Имеется возможность вернуться в главное меню

•	Имеется возможность перейти к созданию отчета при наличии определенных прав

•	Имеется возможность перейти к просмотру отчета при наличии определенных прав

Основной успешный сценарий:

1.	Пользователь начинает сценарий после выполнения предусловия.

2.	Система выдает карточку Работа с отчетами с вариантами взаимодействия с ней. 

3.	При нажатии на кнопки «Создать отчет» перейдет на страницу создания отчета при наличии определенных прав 

4.	При нажатии на кнопки «Просмотреть отчет» перейдет на страницу просмотра отчетов при наличии определенных прав 

Исключения:

При нажатии на кнопки «Выход из системы» пользователь закончит работу с системой как пользователем, под которым он авторизован и проинформируется об этом.

При нажатии кнопки «Главное меню» вернется в главное меню.

 <img width="348" height="156" alt="image" src="https://github.com/user-attachments/assets/ec6da255-2b1e-4c2a-b229-5b4d909361d4" />

MCV диаграмма меню работы с отчетами

_Карточка варианта использования "Создание отчета"_

1)	Предусловие (требование для начала работы сценария)

•	Система запущена и готова к работе по определенному адресу

•	База данных подключена и настроена

•	В системе есть шаблоны для работы с ней

•	Пользователь авторизован и имеет доступ к системе

2)	Минимальные гарантии

•	Состояние Баз данных неизменное

•	Данные в Базе данных неизменные

•	Имеется возможность выхода из системы

•	Имеется возможность вернуться назад к выбору варианта взаимодействия с отчетами

•	Имеется возможность вернуться в главное меню

•	Имеется возможность перейти к созданию отчета при наличии определенных прав

Основной успешный сценарий:

1.	Пользователь начинает сценарий после выполнения предусловия.

2.	Система выдает карточку Создать отчет с вариантами взаимодействия с ней. 

3.	При нажатии на кнопки создания отчета перейдет на страницу создания отчета при наличии определенных прав 

Исключения:

При нажатии на кнопки «Выход из системы» пользователь закончит работу с системой как пользователем, под которым он авторизован и 
проинформируется об этом.

При нажатии кнопки «Главное меню» вернется в главное меню.

При нажатии кнопки «Назад к отчетам» пользователь вернется назад к выбору варианта взаимодействия с отчетами.

<img width="486" height="284" alt="image" src="https://github.com/user-attachments/assets/bb93be2a-51a4-47e3-8534-ffb0ceeb0683" />

MCV диаграмма создания отчета


_Карточка варианта использования "Просмотр отчетов"_

1)	Предусловие (требование для начала работы сценария)

•	Система запущена и готова к работе по определенному адресу

•	База данных подключена и настроена

•	В системе есть шаблоны для работы с ней

•	Пользователь авторизован и имеет доступ к системе

2)	Минимальные гарантии

•	Состояние Баз данных неизменное

•	Данные в Базе данных неизменные

•	Имеется возможность выхода из системы

•	Имеется возможность вернуться назад к выбору варианта взаимодействия с отчетами

•	Имеется возможность вернуться в главное меню

•	Имеется возможность перейти к просмотру отчета при наличии определенных прав

Основной успешный сценарий:

1.	Пользователь начинает сценарий после выполнения предусловия.

2.	Система выдает карточку Просмотр отчетов с вариантами взаимодействия с ней. 

3.	При нажатии на кнопки просмотра отчета перейдет на страницу просмотра отчета при наличии определенных прав 

Исключения:

При нажатии на кнопки «Выход из системы» пользователь закончит работу с системой как пользователем, под которым он авторизован и проинформируется об этом.

При нажатии кнопки «Главное меню» вернется в главное меню.

При нажатии кнопки «Назад к отчетам» пользователь вернется назад к выбору варианта взаимодействия с отчетами.

<img width="497" height="241" alt="image" src="https://github.com/user-attachments/assets/bbad88a5-3f27-46a7-922a-2455b85b92c1" />

MCV диаграмма просмотра отчета


## Вариант использования: «Продажа билетов»

_Карточка варианта использования "Продажа билетов"_

1)	Предусловие (требование для начала работы сценария)

•	Система запущена и готова к работе по определенному адресу

•	База данных подключена и настроена

•	В системе есть шаблоны для работы с ней

•	Пользователь авторизован и имеет доступ к системе

•	Пользователь перешел в раздел «продажа билетов»

2)	Минимальные гарантии

•	Состояние Баз данных неизменное

•	Данные в Базе данных неизменные

•	Имеется возможность выхода из системы

•	Имеется возможность вернуться в главное меню

Основной успешный сценарий:

1.	Пользователь начинает сценарий после выполнения предусловия.

2.	Система выдает шаблон Доступные сеансы с вариантами взаимодействия с ней. 

3.	При нажатии на кнопки выбрать сеанс перейдет на страницу корзины при наличии определенных прав 

4.	Пользователь может выбрать билеты

Исключения:

При нажатии на кнопки «Выход из системы» пользователь закончит работу с системой как пользователем, под которым он авторизован и проинформируется об этом.

При нажатии кнопки «Главное меню» вернется в главное меню.

При нажатии кнопки «Назад к отчетам» пользователь вернется назад к выбору варианта взаимодействия с отчетами.

<img width="524" height="676" alt="image" src="https://github.com/user-attachments/assets/2a089bdb-091a-44ca-b1de-9fe58c053252" />

MCV диаграмма работы с продажей билетов





